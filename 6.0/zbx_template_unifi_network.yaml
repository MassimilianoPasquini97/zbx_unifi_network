zabbix_export:
  version: '6.0'
  date: '2024-06-28T19:50:03Z'
  groups:
    - uuid: c066ade8616c43d9acfac81bd1ef6a63
      name: Network
    - uuid: 36bff6c29af64692839d077febfc7079
      name: 'Templates/Network devices'
  templates:
    - uuid: 7db7c68fd7114232a2a5c5eb4e84d94f
      template: 'Unifi Network'
      name: 'Unifi Network'
      description: |
        This template use Unifi Dream Machine API for fetch data. API Wiki: https://ubntwiki.com/products/software/unifi-controller/api
        
        This macros are mandatory:
        - {$UNIFI.IP}: Unifi IP or fqdn
        - {$UNIFI.USERNAME}: Unifi username
        - {$UNIFI.PASSWORD}: Unifi password
        - {$UNIFI.API.AUTH.URI}: change if using unifi controller vm
        - {$UNIFI.API.AUTH.TOKEN}: change if using unifi controller vm
        - {$UNIFI.API.URI}: change if using unifi controller vm
        
        For security reason create a dedicated zabbix view only user on Unifi.
      groups:
        - name: 'Templates/Network devices'
      items:
        - uuid: adb686720e594b6eb330a8ac21e1f97c
          name: 'API stat/sta'
          type: HTTP_AGENT
          key: unifi.client
          delay: 5m
          history: '0'
          trends: '0'
          value_type: TEXT
          preprocessing:
            - type: REGEX
              parameters:
                - '{$UNIFI.API.AUTH.TOKEN}=([^;]+);'
                - \1
            - type: JAVASCRIPT
              parameters:
                - |
                  try {
                      const url = 'https://{$UNIFI.IP}/{$UNIFI.API.URI}/sta';
                  
                      request = new HttpRequest();
                      request.addHeader('Cookie: {$UNIFI.API.AUTH.TOKEN}='+value);
                  
                      response = request.get(url);
                      if (request.getStatus() != 200) {
                          throw 'Response code: '+request.getStatus();
                      }
                      response = JSON.parse(response);
                      return JSON.stringify(response);
                  } catch (error) {
                      Zabbix.log(4, '[Unifi Dream Machine Pro]: '+error);
                      return JSON.stringify({});
                  }
          timeout: 10s
          url: 'https://{$UNIFI.IP}/{$UNIFI.API.AUTH.URI}'
          posts: |
            {
                "username": "{$UNIFI.USERNAME}",
                "password": "{$UNIFI.PASSWORD}"
            }
          post_type: JSON
          retrieve_mode: BOTH
          request_method: POST
          output_format: JSON
          tags:
            - tag: Application
              value: raw
        - uuid: bc04da34977e44b797750e41ce55e40d
          name: 'Unifi CPU Usage %'
          type: DEPENDENT
          key: unifi.cpu
          delay: '0'
          history: 7d
          trends: 90d
          value_type: FLOAT
          units: '%'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[1].[''gw_system-stats''].cpu'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: cpu
          triggers:
            - uuid: 05eff4fc03e64c5b8652cdb1d40fb9c7
              expression: 'avg(/Unifi Network/unifi.cpu,{$UNIFI.CPU.USAGE.HIGH.SEC})>{$UNIFI.CPU.USAGE.HIGH}'
              name: 'CPU Usage > {$UNIFI.CPU.USAGE.HIGH}%'
              priority: HIGH
            - uuid: 8bd2279066d04957b9e064aab7c177c1
              expression: 'avg(/Unifi Network/unifi.cpu,{$UNIFI.CPU.USAGE.WARNING.SEC})>{$UNIFI.CPU.USAGE.WARNING}'
              name: 'CPU Usage > {$UNIFI.CPU.USAGE.WARNING}%'
              priority: WARNING
              dependencies:
                - name: 'CPU Usage > {$UNIFI.CPU.USAGE.HIGH}%'
                  expression: 'avg(/Unifi Network/unifi.cpu,{$UNIFI.CPU.USAGE.HIGH.SEC})>{$UNIFI.CPU.USAGE.HIGH}'
        - uuid: 6b791e73ffca47a8a4434668469a8c03
          name: 'API stat/device-basic'
          type: HTTP_AGENT
          key: unifi.device
          delay: 1d
          history: '0'
          trends: '0'
          value_type: TEXT
          preprocessing:
            - type: REGEX
              parameters:
                - '{$UNIFI.API.AUTH.TOKEN}=([^;]+);'
                - \1
            - type: JAVASCRIPT
              parameters:
                - |
                  try {
                      const url = 'https://{$UNIFI.IP}/{$UNIFI.API.URI}/device-basic';
                  
                      request = new HttpRequest();
                      request.addHeader('Cookie: {$UNIFI.API.AUTH.TOKEN}='+value);
                  
                      response = request.get(url);
                      if (request.getStatus() != 200) {
                          throw 'Response code: '+request.getStatus();
                      }
                      response = JSON.parse(response);
                      return JSON.stringify(response);
                  } catch (error) {
                      Zabbix.log(4, '[Unifi Dream Machine Pro]: '+error);
                      return JSON.stringify({});
                  }
          timeout: 10s
          url: 'https://{$UNIFI.IP}/{$UNIFI.API.AUTH.URI}'
          posts: |
            {
                "username": "{$UNIFI.USERNAME}",
                "password": "{$UNIFI.PASSWORD}"
            }
          post_type: JSON
          retrieve_mode: BOTH
          request_method: POST
          output_format: JSON
          tags:
            - tag: Application
              value: raw
        - uuid: 5d034734fc2d49e59a3f3305cc6aaad7
          name: 'Unifi Name'
          type: DEPENDENT
          key: unifi.gw_name
          delay: '0'
          history: 7d
          trends: '0'
          value_type: TEXT
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[1].gw_name'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
          triggers:
            - uuid: 619191afb5a64f93ab918c9bf8522164
              expression: 'last(/Unifi Network/unifi.gw_name,#1:now-24h)<>last(/Unifi Network/unifi.gw_name,#1)=1'
              name: 'Hostname Changed'
              priority: WARNING
        - uuid: ef0672fee36f43c48d88b601a06beceb
          name: 'API stat/health'
          type: HTTP_AGENT
          key: unifi.health
          delay: 5m
          history: '0'
          trends: '0'
          value_type: TEXT
          preprocessing:
            - type: REGEX
              parameters:
                - '{$UNIFI.API.AUTH.TOKEN}=([^;]+);'
                - \1
            - type: JAVASCRIPT
              parameters:
                - |
                  try {
                      const url = 'https://{$UNIFI.IP}/{$UNIFI.API.URI}/health';
                  
                      request = new HttpRequest();
                      request.addHeader('Cookie: {$UNIFI.API.AUTH.TOKEN}='+value);
                  
                      response = request.get(url);
                      if (request.getStatus() != 200) {
                          throw 'Response code: '+request.getStatus();
                      }
                      response = JSON.parse(response);
                      return JSON.stringify(response);
                  } catch (error) {
                      Zabbix.log(4, '[Unifi Dream Machine Pro]: '+error);
                      return JSON.stringify({});
                  }
          timeout: 10s
          url: 'https://{$UNIFI.IP}/{$UNIFI.API.AUTH.URI}'
          posts: |
            {
                "username": "{$UNIFI.USERNAME}",
                "password": "{$UNIFI.PASSWORD}"
            }
          post_type: JSON
          retrieve_mode: BOTH
          request_method: POST
          output_format: JSON
          tags:
            - tag: Application
              value: raw
          triggers:
            - uuid: 631488ad954b474dbb1ac5f87f2e731e
              expression: 'last(/Unifi Network/unifi.health,#3)=""'
              name: 'Unifi API not responding'
              priority: HIGH
        - uuid: 9bc9eb2def2a4bcab5555889b1f3cc03
          name: 'Unifi LAN Client'
          type: DEPENDENT
          key: unifi.lan.client
          delay: '0'
          history: 7d
          trends: 90d
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[3].num_user'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
            - tag: Interface
              value: lan
        - uuid: c2b46c301f1248a5b25b41e4592900b1
          name: 'Unifi LAN Guest Client'
          type: DEPENDENT
          key: unifi.lan.guest.client
          delay: '0'
          history: 7d
          trends: 90d
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[3].num_guest'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
            - tag: Interface
              value: lan
        - uuid: 0ff8f3e31cf44064994c4490168b1cd3
          name: 'Unifi LAN Status'
          type: DEPENDENT
          key: unifi.lan.status
          delay: '0'
          history: 7d
          trends: '0'
          value_type: TEXT
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[3].status'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
            - tag: Interface
              value: lan
          triggers:
            - uuid: 021ff8a030f944fca0df2a9f413d51b8
              expression: 'last(/Unifi Network/unifi.lan.status,#3)<>"ok" and last(/Unifi Network/unifi.lan.status,#3)<>"unknown"'
              name: 'Problem on LAN'
              priority: HIGH
        - uuid: dcd33070e4ad4f60b647a1961f33aca7
          name: 'Unifi LAN SW'
          type: DEPENDENT
          key: unifi.lan.sw
          delay: '0'
          history: 7d
          trends: 90d
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[3].num_sw'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
            - tag: Interface
              value: lan
        - uuid: 88d4706e92964e8c835f323b58877f08
          name: 'Unifi LAN SW Adopted'
          type: DEPENDENT
          key: unifi.lan.sw.adopted
          delay: '0'
          history: 7d
          trends: 90d
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[3].num_adopted'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
            - tag: Interface
              value: lan
        - uuid: 21c89dfcf8be483c9ea345436b521e23
          name: 'Unifi LAN SW Disconnected'
          type: DEPENDENT
          key: unifi.lan.sw.disconnected
          delay: '0'
          history: 7d
          trends: 90d
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[3].num_disconnected'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
            - tag: Interface
              value: lan
          triggers:
            - uuid: 4a94a843199a43209d28d11d4ac4fcf1
              expression: 'avg(/Unifi Network/unifi.lan.sw.disconnected,{$UNIFI.SW.DISCONNECTED.SEC})>0'
              name: 'One or more Switch is disconnected'
              priority: HIGH
        - uuid: ae7c7ddeb12f4fab9e99555f4e30e0de
          name: 'Unifi LAN SW Pending'
          type: DEPENDENT
          key: unifi.lan.sw.pending
          delay: '0'
          history: 7d
          trends: 90d
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[3].num_pending'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
            - tag: Interface
              value: lan
          triggers:
            - uuid: ee9ab163258249f8bb835425ab9e256c
              expression: 'avg(/Unifi Network/unifi.lan.sw.pending,{$UNIFI.SW.PENDING.SEC})>0'
              name: 'One or more Switch need to be adopted'
              priority: INFO
        - uuid: 518344b8648e41cb95ed5f23210e609a
          name: 'Unifi Memory Usage %'
          type: DEPENDENT
          key: unifi.mem
          delay: '0'
          history: 7d
          trends: 90d
          value_type: FLOAT
          units: '%'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[1].[''gw_system-stats''].mem'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: memory
          triggers:
            - uuid: 612a2e49d50749a7a733db1635d4ca4a
              expression: 'avg(/Unifi Network/unifi.mem,{$UNIFI.MEMORY.USAGE.HIGH.SEC})>{$UNIFI.MEMORY.USAGE.HIGH}'
              name: 'Memory Usage > {$UNIFI.MEMORY.USAGE.HIGH}%'
              priority: HIGH
            - uuid: 9d3eed23e1264c8fb1dd7fcfd9f366b8
              expression: 'avg(/Unifi Network/unifi.mem,{$UNIFI.MEMORY.USAGE.WARNING.SEC})>{$UNIFI.MEMORY.USAGE.WARNING}'
              name: 'Memory Usage > {$UNIFI.MEMORY.USAGE.WARNING}%'
              priority: WARNING
              dependencies:
                - name: 'Memory Usage > {$UNIFI.MEMORY.USAGE.HIGH}%'
                  expression: 'avg(/Unifi Network/unifi.mem,{$UNIFI.MEMORY.USAGE.HIGH.SEC})>{$UNIFI.MEMORY.USAGE.HIGH}'
        - uuid: 19846b5f27fb4c43a2c7c9f8dea081a4
          name: 'Unifi Uptime'
          type: DEPENDENT
          key: unifi.uptime
          delay: '0'
          history: 7d
          trends: '0'
          units: s
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[1].[''gw_system-stats''].uptime'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
          triggers:
            - uuid: 11074bcccecd4f34971a50329bb76f52
              expression: 'last(/Unifi Network/unifi.uptime)<86400'
              name: 'Device rebooted'
              priority: WARNING
        - uuid: 48e299f5945542d6b8b52df1c86bb4e4
          name: 'Unifi VPN Status'
          type: DEPENDENT
          key: unifi.vpn.status
          delay: '0'
          history: 7d
          trends: '0'
          value_type: TEXT
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[4].status'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
            - tag: Interface
              value: vpn
          triggers:
            - uuid: 9e9cc722c7644f879abb0fd99023e2a7
              expression: 'last(/Unifi Network/unifi.vpn.status,#3)<>"ok" and last(/Unifi Network/unifi.vpn.status,#3)<>"unknown"'
              name: 'Problem on VPN'
              priority: HIGH
        - uuid: 2eebb9af70804a6fbd0f54dc66cecc30
          name: 'Unifi VPN Active Users'
          type: DEPENDENT
          key: unifi.vpn.users
          delay: '0'
          history: 7d
          trends: '0'
          value_type: TEXT
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[4].remote_user_num_active'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
            - tag: Interface
              value: vpn
        - uuid: bcd72b39a9bf4f5cbe673542e4947503
          name: 'Unifi WAN ISP Availability'
          type: DEPENDENT
          key: unifi.wan.isp.availability
          delay: '0'
          history: 7d
          trends: 90d
          units: '%'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[1].uptime_stats.WAN.availability'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
            - tag: Interface
              value: wan
        - uuid: 5870daa1ceea48d0bcf2b0501a6310ee
          name: 'Unifi WAN Download'
          type: DEPENDENT
          key: unifi.wan.isp.download
          delay: '0'
          history: 7d
          trends: 90d
          value_type: FLOAT
          units: bps
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[1].[''rx_bytes-r'']'
            - type: MULTIPLIER
              parameters:
                - '8'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
            - tag: Interface
              value: wan
          triggers:
            - uuid: 41866be03f3f467eacd5e290870a97d1
              expression: 'avg(/Unifi Network/unifi.wan.isp.download,{$UNIFI.ISP.SPEED.DOWNLOAD.HIGH.SEC})/10000/{$UNIFI.ISP.SPEED.DOWNLOAD}>{$UNIFI.ISP.SPEED.DOWNLOAD.HIGH}'
              name: 'ISP Download Usage > {$UNIFI.ISP.SPEED.DOWNLOAD.HIGH}%'
              priority: HIGH
            - uuid: 70e48b9f22a44d0599d96bcb81ce3a70
              expression: 'avg(/Unifi Network/unifi.wan.isp.download,{$UNIFI.ISP.SPEED.DOWNLOAD.WARNING.SEC})/10000/{$UNIFI.ISP.SPEED.DOWNLOAD}>{$UNIFI.ISP.SPEED.DOWNLOAD.WARNING}'
              name: 'ISP Download Usage > {$UNIFI.ISP.SPEED.DOWNLOAD.WARNING}%'
              priority: WARNING
              dependencies:
                - name: 'ISP Download Usage > {$UNIFI.ISP.SPEED.DOWNLOAD.HIGH}%'
                  expression: 'avg(/Unifi Network/unifi.wan.isp.download,{$UNIFI.ISP.SPEED.DOWNLOAD.HIGH.SEC})/10000/{$UNIFI.ISP.SPEED.DOWNLOAD}>{$UNIFI.ISP.SPEED.DOWNLOAD.HIGH}'
        - uuid: bcef68f6cb4c4a9582ab45506552a132
          name: 'Unifi WAN ISP Latency Avg'
          type: DEPENDENT
          key: unifi.wan.isp.latency
          delay: '0'
          history: 7d
          trends: 90d
          units: ms
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[1].uptime_stats.WAN.latency_average'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
            - tag: Interface
              value: wan
          triggers:
            - uuid: b15881dc61fb48c995c67431ef053f9b
              expression: 'avg(/Unifi Network/unifi.wan.isp.latency,{$UNIFI.ISP.LATENCY.HIGH.SEC})>{$UNIFI.ISP.LATENCY.HIGH}'
              name: 'ISP Latency Usage > {$UNIFI.ISP.LATENCY.HIGH}ms'
              priority: HIGH
            - uuid: f2d1e5e2a80d46a2abd7597b621e383e
              expression: 'avg(/Unifi Network/unifi.wan.isp.latency,{$UNIFI.ISP.LATENCY.WARNING.SEC})>{$UNIFI.ISP.LATENCY.WARNING}'
              name: 'ISP Latency Usage > {$UNIFI.ISP.LATENCY.WARNING}ms'
              priority: WARNING
              dependencies:
                - name: 'ISP Latency Usage > {$UNIFI.ISP.LATENCY.HIGH}ms'
                  expression: 'avg(/Unifi Network/unifi.wan.isp.latency,{$UNIFI.ISP.LATENCY.HIGH.SEC})>{$UNIFI.ISP.LATENCY.HIGH}'
        - uuid: a9e928c4197b4e10911163c855ee3c8f
          name: 'Unifi WAN ISP Name'
          type: DEPENDENT
          key: unifi.wan.isp.name
          delay: '0'
          history: 7d
          trends: '0'
          value_type: TEXT
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[1].isp_name'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
            - tag: Interface
              value: wan
        - uuid: 4c46adf2a00946f1bd62165534edf5f8
          name: 'Unifi WAN ISP Organization'
          type: DEPENDENT
          key: unifi.wan.isp.organization
          delay: '0'
          history: 7d
          trends: '0'
          value_type: TEXT
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[1].isp_organization'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
            - tag: Interface
              value: wan
        - uuid: 1fb2e533375e448ab092057da508d8f7
          name: 'Unifi WAN Upload'
          type: DEPENDENT
          key: unifi.wan.isp.upload
          delay: '0'
          history: 7d
          trends: 90d
          value_type: FLOAT
          units: bps
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[1].[''tx_bytes-r'']'
            - type: MULTIPLIER
              parameters:
                - '8'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
            - tag: Interface
              value: wan
          triggers:
            - uuid: a0cec212f47a4b458707bd45adf0aec7
              expression: 'avg(/Unifi Network/unifi.wan.isp.upload,{$UNIFI.ISP.SPEED.UPLOAD.HIGH.SEC})/10000/{$UNIFI.ISP.SPEED.UPLOAD}>{$UNIFI.ISP.SPEED.UPLOAD.HIGH}'
              name: 'ISP Upload Usage > {$UNIFI.ISP.SPEED.UPLOAD.HIGH}%'
              priority: HIGH
            - uuid: ec8126a5a5b9449895a82c9869ac9476
              expression: 'avg(/Unifi Network/unifi.wan.isp.upload,{$UNIFI.ISP.SPEED.UPLOAD.WARNING.SEC})/10000/{$UNIFI.ISP.SPEED.UPLOAD}>{$UNIFI.ISP.SPEED.UPLOAD.WARNING}'
              name: 'ISP Upload Usage > {$UNIFI.ISP.SPEED.UPLOAD.WARNING}%'
              priority: WARNING
              dependencies:
                - name: 'ISP Upload Usage > {$UNIFI.ISP.SPEED.UPLOAD.HIGH}%'
                  expression: 'avg(/Unifi Network/unifi.wan.isp.upload,{$UNIFI.ISP.SPEED.UPLOAD.HIGH.SEC})/10000/{$UNIFI.ISP.SPEED.UPLOAD}>{$UNIFI.ISP.SPEED.UPLOAD.HIGH}'
        - uuid: d05b9efa545a4bba93df66756c70a909
          name: 'Unifi WAN ISP Uptime'
          type: DEPENDENT
          key: unifi.wan.isp.uptime
          delay: '0'
          history: 7d
          trends: 90d
          units: s
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[1].uptime_stats.WAN.uptime'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
            - tag: Interface
              value: wan
          triggers:
            - uuid: 4d89ad745ec94e6688b247198e5f24bd
              expression: 'last(/Unifi Network/unifi.wan.isp.uptime)<3600'
              name: 'ISP Uptime changed'
              priority: WARNING
        - uuid: c38767caeb1749c8b491cd1955cfb664
          name: 'Unifi WAN Status'
          type: DEPENDENT
          key: unifi.wan.status
          delay: '0'
          history: 7d
          trends: '0'
          value_type: TEXT
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[1].status'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
            - tag: Interface
              value: wan
          triggers:
            - uuid: 086fb12ad42b4fb6859ce34a45858a3e
              expression: 'last(/Unifi Network/unifi.wan.status,#3)<>"ok" and last(/Unifi Network/unifi.wan.status,#3)<>"unknown"'
              name: 'Problem on WAN'
              priority: HIGH
        - uuid: 340228b81d684eb985bfe1c1d143e709
          name: 'Unifi WLAN AP'
          type: DEPENDENT
          key: unifi.wlan.ap
          delay: '0'
          history: 7d
          trends: 90d
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[0].num_ap'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
            - tag: Interface
              value: wlan
        - uuid: 52d9f16104a44be4bbcc49b66d2ee7dc
          name: 'Unifi WLAN AP Adopted'
          type: DEPENDENT
          key: unifi.wlan.ap.adopted
          delay: '0'
          history: 7d
          trends: 90d
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[0].num_adopted'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
            - tag: Interface
              value: wlan
        - uuid: b707a72b4aba40b9be09e5bbb7ba56b0
          name: 'Unifi WLAN AP Disabled'
          type: DEPENDENT
          key: unifi.wlan.ap.disabled
          delay: '0'
          history: 7d
          trends: 90d
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[0].num_disabled'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
            - tag: Interface
              value: wlan
        - uuid: a8fbff194c7a4991b08fdd688d545b88
          name: 'Unifi WLAN AP Disconnected'
          type: DEPENDENT
          key: unifi.wlan.ap.disconnected
          delay: '0'
          history: 7d
          trends: 90d
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[0].num_disconnected'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
            - tag: Interface
              value: wlan
          triggers:
            - uuid: f3912e88b72f4fecba5f750cf76f9dd8
              expression: 'avg(/Unifi Network/unifi.wlan.ap.disconnected,{$UNIFI.AP.DISCONNECTED.SEC})>0'
              name: 'One or more Acces Point is disconnected'
              priority: HIGH
        - uuid: 6691b14597164df2b34dbdbe7e67cc59
          name: 'Unifi WLAN AP Pending'
          type: DEPENDENT
          key: unifi.wlan.ap.pending
          delay: '0'
          history: 7d
          trends: 90d
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[0].num_pending'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
            - tag: Interface
              value: wlan
          triggers:
            - uuid: 23728a046e5348c0b55451ab33dd5f2e
              expression: 'avg(/Unifi Network/unifi.wlan.ap.pending,{$UNIFI.AP.PENDING.SEC})>0'
              name: 'One or more Access Point need to be adopted'
              priority: INFO
        - uuid: 6494ee43ad94448cb8bfb375cc16f577
          name: 'Unifi WLAN Client'
          type: DEPENDENT
          key: unifi.wlan.client
          delay: '0'
          history: 7d
          trends: 90d
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[0].num_user'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
            - tag: Interface
              value: wlan
        - uuid: e85dea10563940c69e7e6b6a39178d84
          name: 'Unifi WLAN Guest Client'
          type: DEPENDENT
          key: unifi.wlan.guest.client
          delay: '0'
          history: 7d
          trends: 90d
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[0].num_guest'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
            - tag: Interface
              value: wlan
        - uuid: e2cd072b8d474221b63fbb94ffbc58fc
          name: 'Unifi WLAN Status'
          type: DEPENDENT
          key: unifi.wlan.status
          delay: '0'
          history: 7d
          trends: '0'
          value_type: TEXT
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data[0].status'
          master_item:
            key: unifi.health
          tags:
            - tag: Application
              value: Statistics
            - tag: Interface
              value: wlan
          triggers:
            - uuid: 54e4cd7e9fed4a4fbcca448fd3db166f
              expression: 'last(/Unifi Network/unifi.wlan.status,#3)<>"ok" and last(/Unifi Network/unifi.wlan.status,#3)<>"unknown"'
              name: 'Problem on WLAN'
              priority: HIGH
      discovery_rules:
        - uuid: 64ce7addc60d4cbc9be7b5273e387844
          name: 'Client Wired'
          type: DEPENDENT
          key: unifi.client.wired.discovery
          delay: '0'
          filter:
            conditions:
              - macro: '{#WIRED}'
                value: ^true$
                formulaid: A
          item_prototypes:
            - uuid: 3a8cd7fddb02432eb3a9b6229c7b3073
              name: '{#NAME} DNS Record Enabled'
              type: DEPENDENT
              key: 'unifi.client.wired.dns.record.enabled[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''local_dns_record_enabled'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: 8815fa5d1ef9482587b6ed132c55d411
              name: '{#NAME} DNS Record'
              type: DEPENDENT
              key: 'unifi.client.wired.dns.record[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''local_dns_record'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: ec5b6039668d4bd0af9bd71d7a5abd5d
              name: '{#NAME} Guest'
              type: DEPENDENT
              key: 'unifi.client.wired.guest[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''is_guest'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: 420e4ffcbfba4ebda563242a7b35badd
              name: '{#NAME} Hostname'
              type: DEPENDENT
              key: 'unifi.client.wired.hostname[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')].hostname'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: 811623e8c2bd4f0a94fc41515c6bfc79
              name: '{#NAME} IP Fixed'
              type: DEPENDENT
              key: 'unifi.client.wired.ip.fixed[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''use_fixedip'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: db4a00be43104eb89b6547b8cd99f9d7
              name: '{#NAME} IP'
              type: DEPENDENT
              key: 'unifi.client.wired.ip[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')].ip'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: 37ac681c4d49490e8b2425203fe45440
              name: '{#NAME} Macaddress'
              type: DEPENDENT
              key: 'unifi.client.wired.mac[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')].mac'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: ae3a109003d74786bf686e268c0a02f8
              name: '{#NAME} Network'
              type: DEPENDENT
              key: 'unifi.client.wired.network[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')].network'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: 3b4bc37734494c34899c485aab708e8e
              name: '{#NAME} First Seen'
              type: DEPENDENT
              key: 'unifi.client.wired.seen.first[{#MAC}]'
              delay: '0'
              history: 7d
              trends: 90d
              units: unixtime
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''first_seen'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: 05b53565524949d5bf85251adf0f6a98
              name: '{#NAME} Last Seen'
              type: DEPENDENT
              key: 'unifi.client.wired.seen.last[{#MAC}]'
              delay: '0'
              history: 7d
              trends: 90d
              units: unixtime
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''last_seen'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: 4222829863d449f590253f00affec2e3
              name: '{#NAME} Wired Switch Depth'
              type: DEPENDENT
              key: 'unifi.client.wired.sw.depth[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''sw_depth'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: e55881bebd0c464d916e14b63d743e3b
              name: '{#NAME} Wired Switch Port Macaddress'
              type: DEPENDENT
              key: 'unifi.client.wired.sw.port.mac[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''sw_mac'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: 9eb8c0adbc3441189904567ba325cc82
              name: '{#NAME} Wired Switch Port Total rx Retries'
              type: DEPENDENT
              key: 'unifi.client.wired.sw.port.rx.bytes.r[{#MAC}]'
              delay: '0'
              history: 7d
              trends: 90d
              units: B
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''wired-rx_bytes-r'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: e46b8d77bcc94ad6aef47e6501c0b549
              name: '{#NAME} Wired Switch Port Total rx'
              type: DEPENDENT
              key: 'unifi.client.wired.sw.port.rx.bytes[{#MAC}]'
              delay: '0'
              history: 7d
              trends: 90d
              units: B
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''wired-rx_bytes'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: 0bb4370155fd4a688f7314c1d6a165f3
              name: '{#NAME} Wired Switch Port Total rx'
              type: DEPENDENT
              key: 'unifi.client.wired.sw.port.rx.packets[{#MAC}]'
              delay: '0'
              history: 7d
              trends: 90d
              units: packets
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''wired-rx_packets'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: f35db62c68724deeba3d733891405d7c
              name: '{#NAME} Wired Switch Port Speed'
              type: DEPENDENT
              key: 'unifi.client.wired.sw.port.speed[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''wired_rate_mbps'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: b761a6ee8f3d418b9c179a4a836b8cbe
              name: '{#NAME} Wired Switch Port Total tx Retries'
              type: DEPENDENT
              key: 'unifi.client.wired.sw.port.tx.bytes.r[{#MAC}]'
              delay: '0'
              history: 7d
              trends: 90d
              units: B
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''wired-tx_bytes-r'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: 89789cae334740f0ae0f5dc82e796bc0
              name: '{#NAME} Wired Switch Port Total tx'
              type: DEPENDENT
              key: 'unifi.client.wired.sw.port.tx.bytes[{#MAC}]'
              delay: '0'
              history: 7d
              trends: 90d
              units: B
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''wired-tx_bytes'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: c56efa9ccc5a40698d9a3f715d60a0fd
              name: '{#NAME} Wired Switch Port Total tx'
              type: DEPENDENT
              key: 'unifi.client.wired.sw.port.tx.packets[{#MAC}]'
              delay: '0'
              history: 7d
              trends: 90d
              units: packets
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''wired-tx_packets'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: 747d2beef7bd414594ef63591dfb702d
              name: '{#NAME} Wired Switch Port'
              type: DEPENDENT
              key: 'unifi.client.wired.sw.port[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''sw_port'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: 1093b4373e744eb4bf03b3eb98a30f9c
              name: '{#NAME} Uptime'
              type: DEPENDENT
              key: 'unifi.client.wired.uptime[{#MAC}]'
              delay: '0'
              history: 7d
              trends: 90d
              units: s
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')].uptime'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: c9f9273308674fc1b1eb8fd9cfb712cf
              name: '{#NAME} Vlan'
              type: DEPENDENT
              key: 'unifi.client.wired.vlan[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''gw_vlan'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
          master_item:
            key: unifi.client
          lld_macro_paths:
            - lld_macro: '{#MAC}'
              path: $.mac
            - lld_macro: '{#NAME}'
              path: $.name
            - lld_macro: '{#WIRED}'
              path: $.is_wired
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data
        - uuid: 2641227a01cc4265a5be5e0f0a84211d
          name: 'Client Wireless'
          type: DEPENDENT
          key: unifi.client.wireless.discovery
          delay: '0'
          filter:
            conditions:
              - macro: '{#WIRED}'
                value: ^false$
                formulaid: A
          item_prototypes:
            - uuid: c33bfac340764232814c75da1962db4d
              name: '{#NAME} Wireless AP bssid'
              type: DEPENDENT
              key: 'unifi.client.wireless.ap.bssid[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')].bssid'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: dad619b2d09c454b8b1077f000ddca6b
              name: '{#NAME} Wireless AP Channel'
              type: DEPENDENT
              key: 'unifi.client.wireless.ap.channel[{#MAC}]'
              delay: '0'
              history: 7d
              trends: 90d
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')].channel'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: 64b3abf5b7aa4ded97e99bb868a843bb
              name: '{#NAME} Wireless AP essid'
              type: DEPENDENT
              key: 'unifi.client.wireless.ap.essid[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')].essid'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: f8d4f9349e7e4de7b756e434eca53eb0
              name: '{#NAME} Wireless AP Macaddress'
              type: DEPENDENT
              key: 'unifi.client.wireless.ap.mac[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''ap_mac'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: 5d2156d29e6c4bf89c8163decaf240c3
              name: '{#NAME} Wireless powersave'
              type: DEPENDENT
              key: 'unifi.client.wireless.ap.powersave[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''powersave_enabled'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: b858b40518074390a3e5b01a6a3addb0
              name: '{#NAME} Wireless AP Radio'
              type: DEPENDENT
              key: 'unifi.client.wireless.ap.radio[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')].radio'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: e7a55e075ed24423bcc36c521bc9beef
              name: '{#NAME} DNS Record Enabled'
              type: DEPENDENT
              key: 'unifi.client.wireless.dns.record.enabled[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''local_dns_record_enabled'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: f34ce26d42aa4bc98f720da831caf449
              name: '{#NAME} DNS Record'
              type: DEPENDENT
              key: 'unifi.client.wireless.dns.record[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''local_dns_record'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: fdf2e5f46ea94ab3a0a46990ad398226
              name: '{#NAME} Guest'
              type: DEPENDENT
              key: 'unifi.client.wireless.guest[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''is_guest'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: b793fd9ec0f9470fa4a34da017cbef3a
              name: '{#NAME} Hostname'
              type: DEPENDENT
              key: 'unifi.client.wireless.hostname[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')].hostname'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: ad3acc59db2647e788b934018d0a05e4
              name: '{#NAME} IP Fixed'
              type: DEPENDENT
              key: 'unifi.client.wireless.ip.fixed[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''use_fixedip'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: 2be2b34a5851470db5861d39567b3452
              name: '{#NAME} IP'
              type: DEPENDENT
              key: 'unifi.client.wireless.ip[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')].ip'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: ebcb72c516724f71a00f1c7e3ac4eb97
              name: '{#NAME} Macaddress'
              type: DEPENDENT
              key: 'unifi.client.wireless.mac[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')].mac'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: 20d8b796766f4af0b868a98792e58ea4
              name: '{#NAME} Network'
              type: DEPENDENT
              key: 'unifi.client.wireless.network[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')].network'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: b09965b2294b4752a0c1b13e94ef056e
              name: '{#NAME} Wireless Noise'
              type: DEPENDENT
              key: 'unifi.client.wireless.noise[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')].noise'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: 3586fae8be4641dba1ef6ebb54df8e24
              name: '{#NAME} Wireless Total rx Retries'
              type: DEPENDENT
              key: 'unifi.client.wireless.rx.bytes.r[{#MAC}]'
              delay: '0'
              history: 7d
              trends: 90d
              units: B
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''rx_bytes-r'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: d31e62fd92744a35b7a40fe2e59aa918
              name: '{#NAME} Wireless Total rx'
              type: DEPENDENT
              key: 'unifi.client.wireless.rx.bytes[{#MAC}]'
              delay: '0'
              history: 7d
              trends: 90d
              units: B
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''rx_bytes'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: d94b743fc4dd46d98a0978e6af03d5d6
              name: '{#NAME} Wireless Total rx'
              type: DEPENDENT
              key: 'unifi.client.wireless.rx.packets[{#MAC}]'
              delay: '0'
              history: 7d
              trends: 90d
              units: packets
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''rx_packets'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: 1a83c4b8bb424a78ad37c8538163f197
              name: '{#NAME} Wireless rx rate'
              type: DEPENDENT
              key: 'unifi.client.wireless.rx.rates[{#MAC}]'
              delay: '0'
              history: 7d
              trends: 90d
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''rx_rate'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: c2942e1581074568b600886cf0bca485
              name: '{#NAME} First Seen'
              type: DEPENDENT
              key: 'unifi.client.wireless.seen.first[{#MAC}]'
              delay: '0'
              history: 7d
              trends: 90d
              units: unixtime
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''first_seen'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: 1c866132e9be443884734132123a1a75
              name: '{#NAME} Last Seen'
              type: DEPENDENT
              key: 'unifi.client.wireless.seen.last[{#MAC}]'
              delay: '0'
              history: 7d
              trends: 90d
              units: unixtime
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''last_seen'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: aba77fec5fba4677926c707f5d3aca07
              name: '{#NAME} Wireless Signal'
              type: DEPENDENT
              key: 'unifi.client.wireless.signal[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')].signal'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: a2727644922f4c388ca6de96f7dcc481
              name: '{#NAME} Wireless Total tx Retries'
              type: DEPENDENT
              key: 'unifi.client.wireless.tx.bytes.r[{#MAC}]'
              delay: '0'
              history: 7d
              trends: 90d
              units: B
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''tx_bytes-r'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: bc7f55e613c34f0fa9c5e17bde81c9dd
              name: '{#NAME} Wireless Total tx'
              type: DEPENDENT
              key: 'unifi.client.wireless.tx.bytes[{#MAC}]'
              delay: '0'
              history: 7d
              trends: 90d
              units: B
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''tx_bytes'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: ebfa2bc0ef8446eb92a0de3f24a6ff88
              name: '{#NAME} Wireless Total tx'
              type: DEPENDENT
              key: 'unifi.client.wireless.tx.packets[{#MAC}]'
              delay: '0'
              history: 7d
              trends: 90d
              units: packets
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''tx_packets'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: 28ee35c5750e4b10bd39dc4f4d72161b
              name: '{#NAME} Wireless tx rate'
              type: DEPENDENT
              key: 'unifi.client.wireless.tx.rates[{#MAC}]'
              delay: '0'
              history: 7d
              trends: 90d
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''tx_rate'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: 3a1bbc1952724a8885bec61622f50c5e
              name: '{#NAME} Uptime'
              type: DEPENDENT
              key: 'unifi.client.wireless.uptime[{#MAC}]'
              delay: '0'
              history: 7d
              trends: 90d
              units: s
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')].uptime'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
            - uuid: 3c65b9564f6944eb86187243ff5e1cd4
              name: '{#NAME} Vlan'
              type: DEPENDENT
              key: 'unifi.client.wireless.vlan[{#MAC}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$.data[?(@.mac==''{#MAC}'')][''gw_vlan'']'
                - type: JSONPATH
                  parameters:
                    - '$.[0]'
              master_item:
                key: unifi.client
          master_item:
            key: unifi.client
          lld_macro_paths:
            - lld_macro: '{#MAC}'
              path: $.mac
            - lld_macro: '{#NAME}'
              path: $.name
            - lld_macro: '{#WIRED}'
              path: $.is_wired
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data
        - uuid: 207a7dd740fb47338976131d64e14902
          name: 'Device UAP'
          type: DEPENDENT
          key: unifi.device.uap.discovery
          delay: '0'
          filter:
            conditions:
              - macro: '{#TYPE}'
                value: ^uap$
                formulaid: A
          host_prototypes:
            - uuid: a18dfe793c104fe491e1882d088b8aea
              host: 'Unifi UAP {#NAME}'
              name: 'Unifi UAP {#NAME}'
              group_links:
                - group:
                    name: Network
              templates:
                - name: 'Unifi UAP'
              macros:
                - macro: '{$UNIFI.UAP.MAC}'
                  value: '{#MAC}'
          master_item:
            key: unifi.device
          lld_macro_paths:
            - lld_macro: '{#MAC}'
              path: $.mac
            - lld_macro: '{#MODEL}'
              path: $.model
            - lld_macro: '{#NAME}'
              path: $.name
            - lld_macro: '{#TYPE}'
              path: $.type
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data
        - uuid: c1f5615fd2ab438e9ecaf86fcf8e206d
          name: 'Device UDM'
          type: DEPENDENT
          key: unifi.device.udm.discovery
          delay: '0'
          filter:
            conditions:
              - macro: '{#TYPE}'
                value: ^udm$
                formulaid: A
          host_prototypes:
            - uuid: 07b84b8225604f868abf6850eb330965
              host: 'Unifi UDM {#NAME}'
              name: 'Unifi UDM {#NAME}'
              group_links:
                - group:
                    name: Network
              templates:
                - name: 'Unifi UDM'
              macros:
                - macro: '{$UNIFI.UDM.MAC}'
                  value: '{#MAC}'
          master_item:
            key: unifi.device
          lld_macro_paths:
            - lld_macro: '{#MAC}'
              path: $.mac
            - lld_macro: '{#MODEL}'
              path: $.model
            - lld_macro: '{#NAME}'
              path: $.name
            - lld_macro: '{#TYPE}'
              path: $.type
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data
        - uuid: 35516fc7990345448be22136df815fa2
          name: 'Device USW'
          type: DEPENDENT
          key: unifi.device.usw.discovery
          delay: '0'
          filter:
            conditions:
              - macro: '{#TYPE}'
                value: ^usw$
                formulaid: A
          host_prototypes:
            - uuid: 15ceef758cbe4fccb3eb205335a7c60d
              host: 'Unifi USW {#NAME}'
              name: 'Unifi USW {#NAME}'
              group_links:
                - group:
                    name: Network
              templates:
                - name: 'Unifi USW'
              macros:
                - macro: '{$UNIFI.USW.MAC}'
                  value: '{#MAC}'
          master_item:
            key: unifi.device
          lld_macro_paths:
            - lld_macro: '{#MAC}'
              path: $.mac
            - lld_macro: '{#MODEL}'
              path: $.model
            - lld_macro: '{#NAME}'
              path: $.name
            - lld_macro: '{#TYPE}'
              path: $.type
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data
      macros:
        - macro: '{$UNIFI.AP.DISCONNECTED.SEC}'
          value: '900'
          description: 'AP Disconnected Trigger Avg threshold in seconds'
        - macro: '{$UNIFI.AP.PENDING.SEC}'
          value: '1800'
          description: 'AP Pending Trigger Avg threshold in seconds'
        - macro: '{$UNIFI.API.AUTH.TOKEN}'
          value: TOKEN
          description: 'Unifi Authentication Token name (if using unifi controller vm set to unifises)'
        - macro: '{$UNIFI.API.AUTH.URI}'
          value: api/auth/login
          description: 'Unifi Authentication API (if using unifi controller vm set to api/login)'
        - macro: '{$UNIFI.API.URI}'
          value: proxy/network/api/s/default/stat
          description: 'Unifi API (if using unifi controller vm set to api/s/default/stat)'
        - macro: '{$UNIFI.CPU.USAGE.HIGH}'
          value: '90'
          description: 'Cpu % High Trigger threshold'
        - macro: '{$UNIFI.CPU.USAGE.HIGH.SEC}'
          value: '900'
          description: 'Cpu High Trigger Avg threshold in seconds'
        - macro: '{$UNIFI.CPU.USAGE.WARNING}'
          value: '80'
          description: 'Cpu % Warning Trigger threshold'
        - macro: '{$UNIFI.CPU.USAGE.WARNING.SEC}'
          value: '900'
          description: 'Cpu Warning Trigger Avg threshold in seconds'
        - macro: '{$UNIFI.IP}'
          description: 'Unifi Ip'
        - macro: '{$UNIFI.ISP.LATENCY.HIGH}'
          value: '30'
          description: 'ISP ms High Trigger threshold'
        - macro: '{$UNIFI.ISP.LATENCY.HIGH.SEC}'
          value: '900'
          description: 'ISP  High Trigger Avg threshold in seconds'
        - macro: '{$UNIFI.ISP.LATENCY.WARNING}'
          value: '15'
          description: 'ISP ms Warning Trigger threshold'
        - macro: '{$UNIFI.ISP.LATENCY.WARNING.SEC}'
          value: '900'
          description: 'ISP  Warning Trigger Avg threshold in seconds'
        - macro: '{$UNIFI.ISP.SPEED.DOWNLOAD}'
          value: '1000'
          description: 'ISP Max Download Speed in Mbps'
        - macro: '{$UNIFI.ISP.SPEED.DOWNLOAD.HIGH}'
          value: '95'
          description: 'ISP Download % High Trigger threshold'
        - macro: '{$UNIFI.ISP.SPEED.DOWNLOAD.HIGH.SEC}'
          value: '900'
          description: 'ISP Download Avg High Trigger threshold in seconds'
        - macro: '{$UNIFI.ISP.SPEED.DOWNLOAD.WARNING}'
          value: '85'
          description: 'ISP Download % Warning Trigger threshold'
        - macro: '{$UNIFI.ISP.SPEED.DOWNLOAD.WARNING.SEC}'
          value: '900'
          description: 'ISP Download Avg Warning Trigger threshold in seconds'
        - macro: '{$UNIFI.ISP.SPEED.UPLOAD}'
          value: '250'
          description: 'ISP Max Upload Speed in Mbps'
        - macro: '{$UNIFI.ISP.SPEED.UPLOAD.HIGH}'
          value: '85'
          description: 'ISP Upload % High Trigger threshold'
        - macro: '{$UNIFI.ISP.SPEED.UPLOAD.HIGH.SEC}'
          value: '900'
          description: 'ISP Upload Avg High Trigger threshold in seconds'
        - macro: '{$UNIFI.ISP.SPEED.UPLOAD.WARNING}'
          value: '95'
          description: 'ISP Upload % Warning Trigger threshold'
        - macro: '{$UNIFI.ISP.SPEED.UPLOAD.WARNING.SEC}'
          value: '900'
          description: 'ISP Upload Avg Warning Trigger threshold in seconds'
        - macro: '{$UNIFI.MEMORY.USAGE.HIGH}'
          value: '90'
          description: 'Memory % High Trigger threshold'
        - macro: '{$UNIFI.MEMORY.USAGE.HIGH.SEC}'
          value: '900'
          description: 'Memory High Trigger Avg threshold in seconds'
        - macro: '{$UNIFI.MEMORY.USAGE.WARNING}'
          value: '80'
          description: 'Memory % Warning Trigger threshold'
        - macro: '{$UNIFI.MEMORY.USAGE.WARNING.SEC}'
          value: '900'
          description: 'Memory Warning Trigger Avg threshold in seconds'
        - macro: '{$UNIFI.PASSWORD}'
          type: SECRET_TEXT
          description: 'Unifi View Only Password'
        - macro: '{$UNIFI.SW.DISCONNECTED.SEC}'
          value: '900'
          description: 'SW Disconnected Trigger Avg threshold in seconds'
        - macro: '{$UNIFI.SW.PENDING.SEC}'
          value: '1800'
          description: 'SW Pending Trigger Avg threshold in seconds'
        - macro: '{$UNIFI.USERNAME}'
          description: 'Unifi View Only Username'
